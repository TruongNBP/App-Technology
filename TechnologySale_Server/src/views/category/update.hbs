<body>

  <div class="col-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Update category</h4>
        <p class="card-description">
          Add a new category to the store
        </p>
       
        <form class="forms-sample"  role="form" method="post" action="/category/{{category._id}}/edit"  enctype="multipart/form-data" >
          <div class="form-group">
            <label for="exampleInputName1">Name</label>
            <input type="text" class="form-control" name="name" value="{{category.name}}" id="name">
          </div>
          <div class="form-group">
            <label>Image File</label>
            <div class="input-group col-xs-12 parent-div">
              <input onchange="onChangeFile()" id="image-file" name="image" type="file" class="input-image " placeholder="Upload Image">
              <button class=" btn-upload" >Upload</button>
            </div>
               <img style=" object-fit: cover;" src="{{category.image}}" width="200" height="200"
                id="image-view" />
          </div>
          
          <div class="form-group">
            <label for="exampleTextarea1">Description</label>
            <textarea class="form-control" id="description" name="description"  rows="5">{{category.description}}</textarea>
          </div>
          <button type="submit" class="btn btn-primary mr-2">Submit</button>
          <button class="btn btn-light">Cancel</button>
        </form>
      </div>
    </div>
  </div>
<script>
    const validation = () => {
        const name = document.getElementById('name').value;
        const released = document.getElementById('released').value;
        const submit = document.getElementById('submit');
        if(!name || name.trim().length == 0){
            submit.disabled = true;
        }else{
            submit.disabled = false;
        }
    }
    const onChangeFile = () => {
        const file = document.getElementById('image-file').files[0];
        const reader = new FileReader();
        reader.onload = e => {
            document.getElementById('image-view').src = e.target.result;
            document.getElementById('image-view').style.display = 'block';
        }
        reader.readAsDataURL(file);
    }

</script>
</body>